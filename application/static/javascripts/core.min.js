/* jQuery Cookie Plugin v1.3 */
(function($,j,k){var m=/\+/g;function raw(s){return s}function decoded(s){return decodeURIComponent(s.replace(m,' '))}var n=$.cookie=function(a,b,c){if(b!==k){c=$.extend({},n.defaults,c);if(b===null){c.expires=-1}if(typeof c.expires==='number'){var d=c.expires,t=c.expires=new Date();t.setDate(t.getDate()+d)}b=n.json?JSON.stringify(b):String(b);return(j.cookie=[encodeURIComponent(a),'=',n.raw?b:encodeURIComponent(b),c.expires?'; expires='+c.expires.toUTCString():'',c.path?'; path='+c.path:'',c.domain?'; domain='+c.domain:'',c.secure?'; secure':''].join(''))}var e=n.raw?raw:decoded;var f=j.cookie.split('; ');for(var i=0,l=f.length;i<l;i++){var g=f[i].split('=');if(e(g.shift())===a){var h=e(g.join('='));return n.json?JSON.parse(h):h}}return null};n.defaults={};$.removeCookie=function(a,b){if($.cookie(a)!==null){$.cookie(a,null,b);return true}return false}})(jQuery,document);

/* JavaScript Date Extension v1.0 */
Date.initWithJSON=function(a){var b=a.replace(RegExp('"|\'','g'),'');b=b.replace(/\\?\/Date\((-?\d+)\)\\?\//,'$1');return new Date(parseInt(b))};Date.Format={masks:{defaultValue:"ddd MMM dd yyyy HH:mm:ss",shortDate:"m/d/yy",mediumDate:"MMM d, yyyy",longDate:"MMMM d, yyyy",fullDate:"dddd, MMMM d, yyyy",shortTime:"h:mm TT",mediumTime:"h:mm:ss TT",longTime:"h:mm:ss TT Z",isoDate:"yyyy-MM-dd",isoTime:"HH:mm:ss",isoDateTime:"yyyy-MM-dd'T'HH:mm:ss",isoUtcDateTime:"UTC:yyyy-MM-dd'T'HH:mm:ss'Z'"},i18n:{dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]}};Date.prototype.toFormat=function(g,h){var i=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g,pad=function(a,b){a=String(a);b=b||2;while(a.length<b)a="0"+a;return a};function DateFormat(b,c,e){var f=Date.Format;if(arguments.length==1&&Object.prototype.toString.call(b)=="[object String]"&&!/\d/.test(b)){c=b;b=undefined}b=b?new Date(b):new Date;if(isNaN(b))throw SyntaxError("invalid date");c=String(f.masks[c]||c||f.masks["defaultValue"]);if(c.slice(0,4)=="UTC:"){c=c.slice(4);e=true}var _=e?"getUTC":"get",d=b[_+"Date"](),D=b[_+"Day"](),M=b[_+"Month"](),y=b[_+"FullYear"](),H=b[_+"Hours"](),m=b[_+"Minutes"](),s=b[_+"Seconds"](),L=b[_+"Milliseconds"](),o=e?0:b.getTimezoneOffset(),flags={d:d,dd:pad(d),ddd:f.i18n.dayNames[D],dddd:f.i18n.dayNames[D+7],M:M+1,MM:pad(M+1),MMM:f.i18n.monthNames[M],MMMM:f.i18n.monthNames[M+12],yy:String(y).slice(2),yyyy:y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H),m:m,mm:pad(m),s:s,ss:pad(s),l:pad(L,3),L:pad(L>99?Math.round(L/10):L),t:H<12?"a":"p",tt:H<12?"am":"pm",T:H<12?"A":"P",TT:H<12?"AM":"PM",Z:e?"UTC":(String(b).match(i)||[""]).pop().replace(timezoneClip,""),o:(o>0?"-":"+")+pad(Math.floor(Math.abs(o)/60)*100+Math.abs(o)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10]};return c.replace(RegExp(/d{1,4}|M{1,4}|yy(?:yy)?|([HhmsTt])\1?|[LloSZ]|"[^"]*"|\'[^\']*'/g),function(a){return a in flags?flags[a]:a.slice(1,a.length-1)})}return DateFormat(this,g,h)};

/* jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/ */
jQuery.easing['jswing']=jQuery.easing['swing'];jQuery.extend(jQuery.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d)},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b}});



(function(){var a,b;b=function(a,b){return setTimeout(b,a);};a={width:250,height:75,prefix:'n_',increment_id:0,queue:[],pop:function(c){var d,e,f,g,h,i;if((g=c.expire)==null)c.expire=5000;if((h=c.title)==null)c.title='';if((i=c.message)==null)c.message='';e=this.prefix+ ++this.increment_id;d=$('<div id="'+e+'" class="knotification"><div class="ntitle">'+c.title+'</div><div class="nmessage">'+c.message+'</div></div>');f=this.queue.length*this.height;this.queue.push(e);$('body').append(d);$('#'+e).css({right:-this.width,top:f});$('#'+e).animate({right:0},400,'easeOutExpo',b(c.expire,function(){return a.hide(e);}));return e;},hide:function(b){var c;this.queue=this.queue.filter(function(a){return a!==b;});c=parseInt($('#'+b).css('top'));$('#'+b).animate({right:-this.width},400,'easeInExpo',function(){var b,d,e,f,g,h,i;i=a.queue;for(g=0,h=i.length;g<h;g++){d=i[g];b=$('#'+d);f=parseInt(b.css('top'));if(f>c){e=b.attr('top')?parseInt(b.attr('top'-a.height)):f-a.height;b.attr({'top':e});b.dequeue();b.animate({top:e},400,'easeOutExpo');}}return $(this).remove();});}};window.KNotification=a;}).call(this);(function(){var a,b;a={is_safari:false,socket:null,pop_state:function(a){if(a){$('.modal.in').modal('hide');this.miko(a,false);}},miko:function(b,c){var d;d=$('#nav_bar li.active').index();$.ajax({url:b.href,type:'get',cache:false,data:b.data,async:!(a.is_safari&&b.is_pop),beforeSend:function(c){var d;d=b.href==='/'?0:$('#nav_bar li a[href*="'+b.href+'"]').parent().index();a.nav_select(d);c.setRequestHeader('X-Miko','miko');return a.loading_on();},error:function(b){a.loading_off();a.error_message();return a.nav_select(d);},success:function(d){var e,f,g;a.loading_off();if(c){if(b.href!==location.pathname||location.href.indexOf('?')>=0){b.nav_select_index=$('#nav_bar li.active').index();history.pushState(b,document.title,b.href);}$('html, body').animate({scrollTop:0},500,'easeOutExpo');}f=d.match(/<!miko>/);if(!f){location.reload();return;}g=d.match(/<title>(.*)<\/title>/);d=d.replace(g[0],'');document.title=g[1];e=d.match(/\s@([#.]?\w+)/);if(e)$(e[1]).html(d.replace(e[0],''));return a.after_page_loaded();}});return false;},error_message:function(){return KNotification.pop({title:'Failed',message:'Loading failed, please try again later.'});},validation:function(a){var b;b=true;a.find('input, textarea').each(function(){var a;a=$(this).attr('validation');if(a&&a.length>0)if($(this).val().match(a)){$(this).closest('.control-group').removeClass('error');return $(this).parent().find('.error_msg').remove();}else{$(this).closest('.control-group').addClass('error');$(this).parent().find('.error_msg').remove();if($(this).attr('msg'))$(this).parent().append($('<label for="'+$(this).attr('id')+'" class="error_msg help-inline">'+$(this).attr('msg')+'</label>'));return b=false;}});return b;},loading_on:function(){return $('body, a, .table-pointer tbody tr').css({cursor:'wait'});},loading_off:function(){$('body').css({cursor:'default'});return $('a, .table-pointer tbody tr').css({cursor:'pointer'});},nav_select:function(a){if(a>=0&&!$($('#nav_bar li')[a]).hasClass('active')){$('#nav_bar li').removeClass('active');return $($('#nav_bar li')[a]).addClass('active');}},setup_nav:function(){var a,b;b=location.href.match(/\w(\/\w*)/);if(b){a=b[1]==='/'?0:$('#nav_bar li a[href*="'+b[1]+'"]').parent().index();$('#nav_bar li').removeClass('active');return $($('#nav_bar li')[a]).addClass('active');}},setup_link:function(){$(document).on('click','a:not([href*="#"])',function(b){var c;if(b.metaKey)return;if($(this).closest('.active').length>0&&$(this).closest('.menu').length>0)return false;c=$(this).attr('href');if(c&&!$(this).attr('target')){a.miko({href:c},true);return false;}});$(document).on('submit','form[method=get]:not([action*="#"])',function(){var b;b=$(this).attr('action'+'?'+$(this).serialize());a.miko({href:b},true);return false;});return $(document).on('submit','form[method=post]:not([action*="#"])',function(){var b;if(a.validation($(this))){b=$(this).attr('action');a.miko({href:b,data:$(this).serialize()},false);}return false;});},setup_enter_submit:function(){return $(document).on('keypress','.enter-submit',function(a){if(a.keyCode===13&&a.ctrlKey){$(this).closest('form').submit();return false;}});},after_page_loaded:function(){a.setup_datetime();a.setup_focus();a.setup_tooltip();return a.setup_chat();},setup_datetime:function(){return $('.datetime').each(function(){var a;try{a=new Date($(this).attr('datetime'));return $(this).html(a.toFormat($(this).attr('format')));}catch(b){}});},setup_focus:function(){return $('.focus').select();},setup_tooltip:function(){return $('[rel="tooltip"]').tooltip();},setup_chat:function(){var b;if($('#chat').length>0){b=window.sessionStorage.chat_token;return $.ajax({type:'post',url:'/chat/setup',dataType:'json',cache:false,data:{chat_token:b},success:function(b){var c;window.sessionStorage.chat_token=b.chat_token;$('#chat_name').val(b.name);c=new goog.appengine.Channel(b.channel_token);a.socket=c.open();a.socket.onmessage=a.chat_on_message;return a.socket.onerror=a.chat_on_error;}});}else if(a.socket)return a.socket.close();},chat_on_message:function(a){a=JSON.parse(a.data);if(a.rename){$('#chat_board').append(a.rename.old_name+' rename to '+a.rename.new_name+'\n');$('#chat_name').val(a.rename.new_name);}if(a.message)$('#chat_board').append(a.name+': '+a.message+'\n');return $('#chat_board').animate({scrollTop:$('#chat_board').prop('scrollHeight')},500,'easeOutExpo');},chat_on_error:function(){window.sessionStorage.removeItem('chat_token');return this.setup_chat();}};window.core=a;b=navigator.userAgent.toLowerCase();a.is_safari=b.indexOf('safari')!==-1&&b.indexOf('chrome')===-1;}).call(this);(function(){var a,b,c;c=(function(){function a(){this.create_post();this.delete_post();return this;}a.prototype.create_post=function(){return $(document).on('submit','form#form_create_post',function(){if(!core.validation($(this)))return false;$.ajax({type:'post',url:$(this).attr('action'),data:$(this).serialize(),dataType:'json',cache:false,beforeSend:function(){return core.loading_on();},error:function(){core.loading_off();return core.error_message();},success:function(a){core.loading_off();if(a.success)return core.miko({href:location.href},false);else return KNotification.pop({title:'Failed',message:'Please check again.'});}});return false;});};a.prototype.delete_post=function(){return $(document).on('click','a.delete_post',function(){$.ajax({type:'delete',url:$(this).attr('href'),dataType:'json',cache:false,beforeSend:function(){return core.loading_on();},error:function(){core.loading_off();return core.error_message();},success:function(a){core.loading_off();if(a.success)return core.miko({href:location.href},false);else return KNotification.pop({title:'Failed!',message:'You could not delete this post.'});}});return false;});};return a;})();a=(function(){function a(){this.send_msg();return this;}a.prototype.send_msg=function(){return $(document).on('submit','form#form_chat_input',function(){var a;a=window.sessionStorage.chat_token;$.ajax({type:'post',url:$(this).attr('action'),dataType:'json',cache:false,data:{token:a,msg:$('#chat_msg').val(),name:$('#chat_name').val()},success:function(a){if(a.success)return $('#chat_msg').val('');}});return false;});};return a;})();b=(function(){function b(){new c();new a();return this;}return b;})();$(function(){core.setup_nav();core.setup_link();core.setup_enter_submit();window.onpopstate=function(a){return core.pop_state(a.state);};new b();return core.after_page_loaded();});}).call(this);